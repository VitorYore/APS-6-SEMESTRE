{% extends "base.html" %}

{% block title %}Gerenciar UsuÃ¡rios{% endblock %}

{% block content %}
<div class="grid-2">
    <div class="card">
        <h2>âž• Cadastrar Novo UsuÃ¡rio</h2>
        <form id="user-form" style="margin-top: 1.5rem;">
            <label>Nome do UsuÃ¡rio</label>
            <input type="text" id="user-name" placeholder="Ex: JoÃ£o Silva" required>
            
            <label>NÃ­vel de Acesso</label>
            <select id="user-level" required>
                <option value="1">NÃ­vel 1 - Acesso BÃ¡sico</option>
                <option value="2">NÃ­vel 2 - Acesso IntermediÃ¡rio</option>
                <option value="3">NÃ­vel 3 - Acesso Total</option>
            </select>
            
            <label>Captura de Foto</label>
            <div style="position: relative;">
                <video id="camera" width="100%" style="border-radius: 10px; background: #000; display: none;" autoplay></video>
                <canvas id="canvas" style="display: none;"></canvas>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <button type="button" onclick="startCamera()" class="btn-primary" style="flex: 1;">
                    ðŸ“· Ativar CÃ¢mera
                </button>
                <button type="button" onclick="capturePhoto()" class="btn-success" style="flex: 1;">
                    ðŸ“¸ Capturar Foto
                </button>
            </div>
            
            <div id="photo-preview" class="photo-preview">
                <p class="photo-success">âœ“ Foto capturada com sucesso!</p>
                <img id="preview-img" alt="Preview">
            </div>
            
            <button type="submit" class="btn-primary" style="width: 100%; margin-top: 1rem;">
                ðŸ’¾ Cadastrar UsuÃ¡rio
            </button>
        </form>
    </div>
    
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h2 style="margin: 0;">ðŸ‘¥ UsuÃ¡rios Cadastrados</h2>
            <button onclick="reloadEmbeddings()" class="btn-success">
                ðŸ”„ Recarregar Sistema
            </button>
        </div>
        <div id="users-list" style="margin-top: 1.5rem;">
            <p class="loading">Carregando...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/users.js') }}"></script>
{% endblock %}